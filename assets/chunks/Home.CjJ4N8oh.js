import{u as w,s as S,P as C}from"./theme.0-ujcyy5.js";import{_ as D,r as b,k as z,j as h,l as M,q as p,s as g,C as c,x as y,F as j,y as B,A as $,M as I,X as V,Y as F,P as T,E as L,u as R,v as k,G as x}from"./framework.CB0sRpfv.js";import{T as E}from"./Tab.xj6L0qEW.js";const K={key:0,class:"pagination"},U={class:"page-number"},q=["onClick"],A={class:"page-num"},G=["max"],H={__name:"Pagination",props:{total:{type:Number,default:0},page:{type:Number,default:1},limit:{type:Number,default:5},routePath:{type:String,default:""},useParams:{type:Boolean,default:!1},wingSize:{type:Number,default:1}},setup(o){const u=o,l=b(null),m=b(!1),v=z(),t=b(u.page),n=h(()=>Math.ceil(u.total/u.limit)),P=h(()=>{let s=[],e=Math.max(t.value-u.wingSize,2),a=Math.min(t.value+u.wingSize,n.value-1);s.push(1),e>2?s.push("..."):e=2;for(let f=e;f<=a;f++)s.push(f);return a<n.value-1?s.push("..."):a===n.value-1&&(a=n.value-1),n.value>1&&s.push(n.value),s}),r=()=>{const s=Number(l.value);!Number.isInteger(s)||s<1?l.value=null:s>n.value?l.value=n.value:l.value=s},i=(s,e)=>{u.useParams?e===1?v.go(`${u.routePath}`):v.go(`${u.routePath}?page=${e}`):v.go(s)},d=()=>{if(m.value=!1,!l.value)return!1;i(l.value===1?`${u.routePath}`:`${u.routePath}/page/${l.value}`,l.value)},N=()=>{const e=new URLSearchParams(window.location.search).get("page");e&&u.useParams&&(t.value=Number(e))};return M(()=>{N()}),(s,e)=>o.total>0?(p(),g("div",K,[t.value>1?(p(),g("div",{key:0,class:"page-item prev",onClick:e[0]||(e[0]=a=>i(t.value===2?`${o.routePath}`:`${o.routePath}/page/${t.value-1}`,t.value===2?1:t.value-1))},e[4]||(e[4]=[c("i",{class:"iconfont icon-back"},null,-1),c("span",{class:"page-text"},"上页",-1)]))):y("",!0),c("div",U,[(p(!0),g(j,null,B(P.value,(a,f)=>(p(),g("div",{key:f,class:$([a==="..."?"point":"page-item",{choose:a===t.value}]),onClick:O=>i(a===1?`${o.routePath}`:`${o.routePath}/page/${a}`,a)},[c("span",A,L(a),1)],10,q))),128)),c("div",{class:$(["fast-jump",{focus:m.value}]),title:"快速跳转"},[I(c("input",{"onUpdate:modelValue":e[1]||(e[1]=a=>l.value=a),min:1,max:n.value,onFocus:e[2]||(e[2]=a=>m.value=!0),onBlur:d,onInput:r,onKeydown:F(d,["enter"])},null,40,G),[[V,l.value,void 0,{number:!0}]]),c("i",{class:$(["iconfont icon-arrow-right",{click:l.value}]),onClick:T(d,["stop"])},null,2)],2)]),t.value*o.limit<o.total?(p(),g("div",{key:1,class:"page-item next",onClick:e[3]||(e[3]=a=>i(`${o.routePath}/page/${t.value+1}`,t.value+1))},e[5]||(e[5]=[c("span",{class:"page-text"},"下页",-1),c("i",{class:"iconfont icon-back"},null,-1)]))):y("",!0)])):y("",!0)}},J=D(H,[["__scopeId","data-v-52b0f8ba"]]),W={__name:"Home",props:{page:{type:Number,default:1}},setup(o){const u=o,{theme:l}=R(),m=w(),{categoryData:v,postsData:t}=S(m),n=h(()=>{const r=l.value.blog.pageSize,i=(u.page-1)*r,d=i+r;return t.value.slice(i,d)}),P=h(()=>Object.keys(v.value).map(r=>({name:r,count:v.value[r].length})).sort((r,i)=>i.count-r.count));return(r,i)=>(p(),g("div",null,[k(E,{home:"",type:"category",data:P.value},null,8,["data"]),c("div",null,[k(C,{data:n.value},null,8,["data"]),k(J,{total:x(t).length,page:u.page,limit:x(l).blog.pageSize},null,8,["total","page","limit"])])]))}};export{W as _};
