import{u as a,s as e,P as t}from"./theme.DD-T5sjG.js";import{_ as l,r as u,k as s,j as o,l as n,q as i,s as r,C as p,x as v,F as c,y as m,A as g,M as h,X as d,Y as f,P as b,E as y,u as P,v as k,G as $}from"./framework.CNl8piqG.js";import{T as w}from"./Tab.DzKHy983.js";const x={key:0,class:"pagination"},N={class:"page-number"},_=["onClick"],S={class:"page-num"},j=["max"],C=l({__name:"Pagination",props:{total:{type:Number,default:0},page:{type:Number,default:1},limit:{type:Number,default:5},routePath:{type:String,default:""},useParams:{type:Boolean,default:!1},wingSize:{type:Number,default:1}},setup(a){const e=a,t=u(null),l=u(!1),P=s(),k=u(e.page),$=o((()=>Math.ceil(e.total/e.limit))),w=o((()=>{let a=[],t=Math.max(k.value-e.wingSize,2),l=Math.min(k.value+e.wingSize,$.value-1);a.push(1),t>2?a.push("..."):t=2;for(let e=t;e<=l;e++)a.push(e);return l<$.value-1?a.push("..."):l===$.value-1&&(l=$.value-1),$.value>1&&a.push($.value),a})),C=()=>{const a=Number(t.value);!Number.isInteger(a)||a<1?t.value=null:a>$.value?t.value=$.value:t.value=a},z=(a,t)=>{e.useParams?1===t?P.go(`${e.routePath}`):P.go(`${e.routePath}?page=${t}`):P.go(a)},M=()=>{if(l.value=!1,!t.value)return!1;z(1===t.value?`${e.routePath}`:`${e.routePath}/page/${t.value}`,t.value)};return n((()=>{(()=>{const a=new URLSearchParams(window.location.search).get("page");a&&e.useParams&&(k.value=Number(a))})()})),(e,u)=>a.total>0?(i(),r("div",x,[k.value>1?(i(),r("div",{key:0,class:"page-item prev",onClick:u[0]||(u[0]=e=>z(2===k.value?`${a.routePath}`:`${a.routePath}/page/${k.value-1}`,2===k.value?1:k.value-1))},u[4]||(u[4]=[p("i",{class:"iconfont icon-back"},null,-1),p("span",{class:"page-text"},"上页",-1)]))):v("",!0),p("div",N,[(i(!0),r(c,null,m(w.value,((e,t)=>(i(),r("div",{key:t,class:g(["..."===e?"point":"page-item",{choose:e===k.value}]),onClick:t=>z(1===e?`${a.routePath}`:`${a.routePath}/page/${e}`,e)},[p("span",S,y(e),1)],10,_)))),128)),p("div",{class:g(["fast-jump",{focus:l.value}]),title:"快速跳转"},[h(p("input",{"onUpdate:modelValue":u[1]||(u[1]=a=>t.value=a),min:1,max:$.value,onFocus:u[2]||(u[2]=a=>l.value=!0),onBlur:M,onInput:C,onKeydown:f(M,["enter"])},null,40,j),[[d,t.value,void 0,{number:!0}]]),p("i",{class:g(["iconfont icon-arrow-right",{click:t.value}]),onClick:b(M,["stop"])},null,2)],2)]),k.value*a.limit<a.total?(i(),r("div",{key:1,class:"page-item next",onClick:u[3]||(u[3]=e=>z(`${a.routePath}/page/${k.value+1}`,k.value+1))},u[5]||(u[5]=[p("span",{class:"page-text"},"下页",-1),p("i",{class:"iconfont icon-back"},null,-1)]))):v("",!0)])):v("",!0)}},[["__scopeId","data-v-52b0f8ba"]]),z={__name:"Home",props:{page:{type:Number,default:1}},setup(l){const u=l,{theme:s}=P(),n=a(),{categoryData:v,postsData:c}=e(n),m=o((()=>{const a=s.value.blog.pageSize,e=(u.page-1)*a,t=e+a;return c.value.slice(e,t)})),g=o((()=>Object.keys(v.value).map((a=>({name:a,count:v.value[a].length}))).sort(((a,e)=>e.count-a.count))));return(a,e)=>(i(),r("div",null,[k(w,{home:"",type:"category",data:g.value},null,8,["data"]),p("div",null,[k(t,{data:m.value},null,8,["data"]),k(C,{total:$(c).length,page:u.page,limit:$(s).blog.pageSize},null,8,["total","page","limit"])])]))}};export{z as _};
