import{_ as s,p as a,R as i,k as e}from"./chunks/framework.D4eJsr-_.js";const n=JSON.parse('{"title":"ROS 设备管理：设置串口权限和固定别名","description":"","frontmatter":{"icon":"host","date":"2024-06-22T00:00:00.000Z","keywords":"串口别名设置,串口权限,udev规则,ROS设备管理","category":["教程"],"tag":["linux","ros"]},"headers":[],"relativePath":"posts/2024/0622.md","filePath":"posts/2024/other/rosSetUdev-0622.md"}');const l=s({name:"posts/2024/0622.md"},[["render",function(s,n,l,t,p,h){return e(),a("div",null,[...n[0]||(n[0]=[i('<h1 id="ros-设备管理-设置串口权限和固定别名" tabindex="-1">ROS 设备管理：设置串口权限和固定别名 <a class="header-anchor" href="#ros-设备管理-设置串口权限和固定别名" aria-label="Permalink to &quot;ROS 设备管理：设置串口权限和固定别名&quot;">​</a></h1><h2 id="前言" tabindex="-1">前言 <a class="header-anchor" href="#前言" aria-label="Permalink to &quot;前言&quot;">​</a></h2><p>在 ROS 开发中，经常需要连接多个传感器和串口设备。然而，设备每次插拔时，系统分配的串口名称（如 <code>/dev/ttyUSB0</code>、<code>/dev/ttyUSB1</code>）可能会发生变化，这给开发和调试带来了不便。本文将详细介绍如何通过 udev 规则解决串口权限问题，并为设备设置固定别名，使设备管理更加便捷。</p><h2 id="一、串口权限问题分析" tabindex="-1">一、串口权限问题分析 <a class="header-anchor" href="#一、串口权限问题分析" aria-label="Permalink to &quot;一、串口权限问题分析&quot;">​</a></h2><p>当我们接入传感器等串口设备时，首先需要确保当前用户有访问该设备的权限。默认情况下，Linux 系统会将串口设备的权限设置为 <code>rw-rw----</code>，只有 root 用户和 dialout 组的用户才能访问。</p><h3 id="_1-1-查看当前设备权限" tabindex="-1">1.1 查看当前设备权限 <a class="header-anchor" href="#_1-1-查看当前设备权限" aria-label="Permalink to &quot;1.1 查看当前设备权限&quot;">​</a></h3><p>接入串口设备后，使用以下命令查看设备信息和权限：</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ls</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -l</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /dev/ttyUSB0</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><a class="img-fancybox" href="/assets/image/2024/other/rosSetUdev-0622/vmware_UXutHu2uyk.png" data-fancybox="gallery" data-caption="查看设备信息和权限"><img class="post-img" src="/assets/image/2024/other/rosSetUdev-0622/vmware_UXutHu2uyk.png" alt="查看设备信息和权限" loading="lazy"><span class="post-img-tip">查看设备信息和权限</span></a></p><p>从输出结果可以看到设备权限，所属组为 <code>dialout</code>。</p><h3 id="_1-2-解决串口权限问题" tabindex="-1">1.2 解决串口权限问题 <a class="header-anchor" href="#_1-2-解决串口权限问题" aria-label="Permalink to &quot;1.2 解决串口权限问题&quot;">​</a></h3><p>我们可以通过以下两种方式解决串口权限问题：</p><h4 id="方法一-将用户添加到-dialout-组" tabindex="-1">方法一：将用户添加到 dialout 组 <a class="header-anchor" href="#方法一-将用户添加到-dialout-组" aria-label="Permalink to &quot;方法一：将用户添加到 dialout 组&quot;">​</a></h4><p>将当前用户添加到 <code>dialout</code> 组，这样用户就有权访问串口设备：</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> usermod</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -a</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -G</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dialout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $USER</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><blockquote><p>注意：执行完此命令后，需要重启会话或重新登录才能生效。</p></blockquote><h4 id="方法二-创建-udev-规则自动设置权限" tabindex="-1">方法二：创建 udev 规则自动设置权限 <a class="header-anchor" href="#方法二-创建-udev-规则自动设置权限" aria-label="Permalink to &quot;方法二：创建 udev 规则自动设置权限&quot;">​</a></h4><p>创建一个 udev 规则文件，使所有串口设备自动获得可读可写可执行权限：</p><ol><li>创建一个脚本文件：</li></ol><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">touch</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ttyUSB_permission.sh</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ol start="2"><li>编辑脚本文件，添加以下内容：</li></ol><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   # 创建 udev 规则文件，设置所有 ttyUSB 设备的权限为 777</span></span>\n<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">echo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;KERNEL==&quot;ttyUSB*&quot;, MODE:=&quot;0777&quot;, GROUP:=&quot;dialout&quot;&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/udev/rules.d/ttyUSB.rules</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   # 重新加载 udev 规则</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">service</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> udev</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> reload</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sleep</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">   </span></span>\n<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   # 重启 udev 服务</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">service</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> udev</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> restart</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">   </span></span>\n<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   # 触发 udev 规则，使规则立即生效</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> udevadm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> trigger</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><ol start="3"><li>给予脚本执行权限：</li></ol><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> chmod</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> +x</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ttyUSB_permission.sh</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ol start="4"><li>运行脚本：</li></ol><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sh</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ttyUSB_permission.sh</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ol start="5"><li>验证权限设置是否成功：</li></ol><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ls</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -l</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /dev/ttyUSB0</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><a class="img-fancybox" href="/assets/image/2024/other/rosSetUdev-0622/vmware_XTmNJvWDLV.png" data-fancybox="gallery" data-caption="验证权限设置成功"><img class="post-img" src="/assets/image/2024/other/rosSetUdev-0622/vmware_XTmNJvWDLV.png" alt="验证权限设置成功" loading="lazy"><span class="post-img-tip">验证权限设置成功</span></a></p><p>可以看到，设备现在已经拥有可读可写可执行权限（<code>rwxrwxrwx</code>）。</p><h2 id="二、设置串口固定别名" tabindex="-1">二、设置串口固定别名 <a class="header-anchor" href="#二、设置串口固定别名" aria-label="Permalink to &quot;二、设置串口固定别名&quot;">​</a></h2><p>为了避免串口名称随设备插拔而变化，我们可以为每个设备设置一个唯一的固定别名。</p><h3 id="_2-1-查看设备的唯一标识符" tabindex="-1">2.1 查看设备的唯一标识符 <a class="header-anchor" href="#_2-1-查看设备的唯一标识符" aria-label="Permalink to &quot;2.1 查看设备的唯一标识符&quot;">​</a></h3><p>首先，我们需要获取设备的唯一标识符，包括 <code>idVendor</code>（厂商 ID）、<code>idProduct</code>（产品 ID）和 <code>serial</code>（序列号）：</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">udevadm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> info</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --attribute-walk</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --name=/dev/ttyUSB0</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> grep</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -E</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;idVendor|idProduct|serial&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>或者查看更详细的信息：</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">udevadm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> info</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --attribute-walk</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --name=/dev/ttyUSB0</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><a class="img-fancybox" href="/assets/image/2024/other/rosSetUdev-0622/vmware_Hh5Mo3zDPb.png" data-fancybox="gallery" data-caption="查看设备属性"><img class="post-img" src="/assets/image/2024/other/rosSetUdev-0622/vmware_Hh5Mo3zDPb.png" alt="查看设备属性" loading="lazy"><span class="post-img-tip">查看设备属性</span></a></p><p>从输出中找到以下关键属性：</p><ul><li><code>idVendor</code>：厂商 ID（如 <code>10c4</code>）</li><li><code>idProduct</code>：产品 ID（如 <code>ea60</code>）</li><li><code>serial</code>：设备序列号（如 <code>0003</code>）</li></ul><p>这些属性的组合可以唯一标识一个设备。</p><h3 id="_2-2-创建-udev-规则设置固定别名" tabindex="-1">2.2 创建 udev 规则设置固定别名 <a class="header-anchor" href="#_2-2-创建-udev-规则设置固定别名" aria-label="Permalink to &quot;2.2 创建 udev 规则设置固定别名&quot;">​</a></h3><p>使用以下步骤为设备创建固定别名：</p><ol><li>创建一个脚本文件：</li></ol><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">touch</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> create_serial_alias.sh</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ol start="2"><li>编辑脚本文件，添加以下内容（根据实际设备属性修改）：</li></ol><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   # 创建 udev 规则文件，为特定设备设置固定别名</span></span>\n<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">echo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;KERNEL==&quot;ttyUSB*&quot;, ATTRS{idVendor}==&quot;10c4&quot;, ATTRS{idProduct}==&quot;ea60&quot;, ATTRS{serial}==&quot;0003&quot;, GROUP:=&quot;dialout&quot;, SYMLINK+=&quot;wheeltec_FDI_IMU_GNSS&quot;&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/udev/rules.d/wheeltec_fdi_imu_gnss.rules</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   # 重新加载 udev 规则</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">service</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> udev</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> reload</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sleep</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">   </span></span>\n<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   # 重启 udev 服务</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">service</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> udev</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> restart</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">   </span></span>\n<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   # 触发 udev 规则</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> udevadm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> trigger</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><ol start="3"><li>给予脚本执行权限：</li></ol><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> chmod</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> +x</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> create_serial_alias.sh</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ol start="4"><li>运行脚本：</li></ol><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sh</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> create_serial_alias.sh</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><a class="img-fancybox" href="/assets/image/2024/other/rosSetUdev-0622/vmware_wMHqP2Z6X9.png" data-fancybox="gallery" data-caption="执行结果"><img class="post-img" src="/assets/image/2024/other/rosSetUdev-0622/vmware_wMHqP2Z6X9.png" alt="执行结果" loading="lazy"><span class="post-img-tip">执行结果</span></a></p><h3 id="_2-3-验证别名设置是否成功" tabindex="-1">2.3 验证别名设置是否成功 <a class="header-anchor" href="#_2-3-验证别名设置是否成功" aria-label="Permalink to &quot;2.3 验证别名设置是否成功&quot;">​</a></h3><p>使用以下命令验证别名是否设置成功：</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ls</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -l</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /dev</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> grep</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> wheeltec</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>如果输出中显示了我们设置的别名，则说明设置成功：</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lrwxrwxrwx</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> root</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> root</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">           7</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Jun</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 22</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 10:00</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> wheeltec_FDI_IMU_GNSS</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> -</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ttyUSB0</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="三、udev-规则详解" tabindex="-1">三、udev 规则详解 <a class="header-anchor" href="#三、udev-规则详解" aria-label="Permalink to &quot;三、udev 规则详解&quot;">​</a></h2><p>udev 规则的各个部分：</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">KERNEL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">=&quot;ttyUSB*&quot;,</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ATTRS</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">{idVendor}==</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">&quot;10c4&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ATTRS{idProduct}==&quot;ea60&quot;,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ATTRS{serial}==&quot;0003&quot;,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> GROUP:=&quot;dialout&quot;,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> SYMLINK+=&quot;wheeltec_FDI_IMU_GNSS&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li><code>KERNEL==&quot;ttyUSB*&quot;</code>：匹配所有以 <code>ttyUSB</code> 开头的设备</li><li><code>ATTRS{idVendor}==&quot;10c4&quot;</code>：匹配厂商 ID 为 <code>10c4</code> 的设备</li><li><code>ATTRS{idProduct}==&quot;ea60&quot;</code>：匹配产品 ID 为 <code>ea60</code> 的设备</li><li><code>ATTRS{serial}==&quot;0003&quot;</code>：匹配序列号为 <code>0003</code> 的设备</li><li><code>GROUP:=&quot;dialout&quot;</code>：将设备的所属组设置为 <code>dialout</code></li><li><code>SYMLINK+=&quot;wheeltec_FDI_IMU_GNSS&quot;</code>：为设备创建一个名为 <code>wheeltec_FDI_IMU_GNSS</code> 的符号链接（别名）</li></ul><h2 id="四、多设备别名设置" tabindex="-1">四、多设备别名设置 <a class="header-anchor" href="#四、多设备别名设置" aria-label="Permalink to &quot;四、多设备别名设置&quot;">​</a></h2><p>如果需要为多个设备设置别名，只需要为每个设备创建一个对应的 udev 规则文件即可。例如：</p><ol><li>为第一个设备创建规则：</li></ol><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">echo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;KERNEL==&quot;ttyUSB*&quot;, ATTRS{idVendor}==&quot;10c4&quot;, ATTRS{idProduct}==&quot;ea60&quot;, ATTRS{serial}==&quot;0003&quot;, GROUP:=&quot;dialout&quot;, SYMLINK+=&quot;sensor1&quot;&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/udev/rules.d/sensor1.rules</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ol start="2"><li>为第二个设备创建规则：</li></ol><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">echo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;KERNEL==&quot;ttyUSB*&quot;, ATTRS{idVendor}==&quot;10c4&quot;, ATTRS{idProduct}==&quot;ea60&quot;, ATTRS{serial}==&quot;0004&quot;, GROUP:=&quot;dialout&quot;, SYMLINK+=&quot;sensor2&quot;&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/udev/rules.d/sensor2.rules</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ol start="3"><li>重新加载 udev 规则：</li></ol><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> udevadm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> control</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --reload-rules</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &amp;&amp; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> udevadm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> trigger</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="五、注意事项" tabindex="-1">五、注意事项 <a class="header-anchor" href="#五、注意事项" aria-label="Permalink to &quot;五、注意事项&quot;">​</a></h2><ol><li><strong>权限问题</strong>：确保当前用户属于 <code>dialout</code> 组，或者设备权限设置正确</li><li><strong>设备唯一性</strong>：使用 <code>idVendor</code>、<code>idProduct</code> 和 <code>serial</code> 的组合来唯一标识设备，避免混淆</li><li><strong>规则文件名</strong>：udev 规则文件的扩展名必须是 <code>.rules</code></li><li><strong>规则优先级</strong>：文件名前缀的数字越大，规则优先级越高</li><li><strong>生效时间</strong>：修改 udev 规则后，需要重新加载规则并触发，或者重新插拔设备才能生效</li><li><strong>设备类型</strong>：不同类型的设备（如 USB 转串口、原生串口）可能需要不同的规则</li></ol><h2 id="参考资料" tabindex="-1">参考资料 <a class="header-anchor" href="#参考资料" aria-label="Permalink to &quot;参考资料&quot;">​</a></h2><ul><li><a href="https://www.kernel.org/pub/linux/utils/kernel/hotplug/udev/udev.html" target="_blank" rel="noreferrer">Linux udev 官方文档</a></li><li><a href="http://wiki.ros.org/serial" target="_blank" rel="noreferrer">ROS Wiki - Serial 设备</a></li></ul>',73)])])}]]);export{n as __pageData,l as default};
